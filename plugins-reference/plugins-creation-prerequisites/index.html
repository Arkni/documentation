<!doctype html><html><head><meta http-equiv=Content-Type content="text/html; charset=utf-8"><meta http-equiv=X-UA-Compatible content="IE=edge,chrome=1"><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1"><meta name=msapplication-TileColor content=#FFFFFF><meta name=msapplication-TileImage content=http://docs.kuzzle.io/assets/images/favicon/mstile-144x144.png><meta name=msapplication-square70x70logo content=http://docs.kuzzle.io/assets/images/favicon/mstile-70x70.png><meta name=msapplication-square150x150logo content=http://docs.kuzzle.io/assets/images/favicon/mstile-150x150.png><meta name=msapplication-wide310x150logo content=http://docs.kuzzle.io/assets/images/favicon/mstile-310x150.png><meta name=msapplication-square310x310logo content=http://docs.kuzzle.io/assets/images/favicon/mstile-310x310.png><meta name=google-site-verification content=luspUdq52gkUU0FFChQ2xmeXSs5HDafpARQ7fVXVBp4><meta itemprop=name content="Plugins creation prerequisites"><meta itemprop=image content=http://docs.kuzzle.io/assets/images/favicon/favicon-196x196.png><meta name=twitter:card value=summary><meta name=twitter:site content=@kuzzleio><meta name=twitter:title content="Plugins creation prerequisites"><meta name=twitter:creator content=@kuzzleio><meta name=twitter:image content=http://docs.kuzzle.io/assets/images/favicon/favicon-196x196.png><meta property=og:title content="Plugins creation prerequisites"><meta property=og:type content=article><meta property=og:site_name content=""><meta property=og:image content=http://docs.kuzzle.io/assets/images/favicon/favicon-96x96.png><meta property=article:published_time content=2017-08-30T15:07:32.787Z><meta property=article:modified_time content=2017-08-30T15:07:32.787Z><meta property=article:section content="Plugins Reference"><meta property=article:tag content="Plugins creation prerequisites"><meta property=og:description content="requirements to develop your plugin"><meta itemprop=description content="requirements to develop your plugin"><meta name=twitter:description content="requirements to develop your plugin"><meta name=description content="requirements to develop your plugin"><link rel=apple-touch-icon-precomposed sizes=57x57 href=/assets/images/favicon/apple-touch-icon-57x57.png><link rel=apple-touch-icon-precomposed sizes=114x114 href=/assets/images/favicon/apple-touch-icon-114x114.png><link rel=apple-touch-icon-precomposed sizes=72x72 href=/assets/images/favicon/apple-touch-icon-72x72.png><link rel=apple-touch-icon-precomposed sizes=144x144 href=/assets/images/favicon/apple-touch-icon-144x144.png><link rel=apple-touch-icon-precomposed sizes=60x60 href=/assets/images/favicon/apple-touch-icon-60x60.png><link rel=apple-touch-icon-precomposed sizes=120x120 href=/assets/images/favicon/apple-touch-icon-120x120.png><link rel=apple-touch-icon-precomposed sizes=76x76 href=/assets/images/favicon/apple-touch-icon-76x76.png><link rel=apple-touch-icon-precomposed sizes=152x152 href=/assets/images/favicon/apple-touch-icon-152x152.png><link rel=icon type=image/png href=/assets/images/favicon/favicon-196x196.png sizes=196x196><link rel=icon type=image/png href=/assets/images/favicon/favicon-96x96.png sizes=96x96><link rel=icon type=image/png href=/assets/images/favicon/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=/assets/images/favicon/favicon-16x16.png sizes=16x16><link rel=icon type=image/png href=/assets/images/favicon/favicon-128.png sizes=128x128><link rel=stylesheet href=/assets/font-awesome/scss/font-awesome.css><link href="//fonts.googleapis.com/css?family=Ubuntu:400,500,700" rel=stylesheet><title>Plugins creation prerequisites - Plugins Reference - Kuzzle documentation</title><link rel=stylesheet href=//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.7.0/styles/atom-one-light.min.css><link href=/assets/stylesheets/full/screen.css rel=stylesheet type=text/css media=screen></head><body class=index><header><div class=wrapper><div id=logo><a href=http://kuzzle.io/ >&#xA0;</a></div><a class=mobile-nav-burger href=javascript:;></a><nav><ul><li><a href=http://kuzzle.io/kuzzle-enterprise/ class=nav-item>product</a></li><li><a href=http://docs.kuzzle.io/ class="nav-item developers active">Documentation</a><ul class=mobile-nav><li><a href=/guide><span>Guide</span></a></li><li><a href=/sdk-reference><span>SDK Reference</span></a></li><li><a href=/kuzzle-dsl><span>Kuzzle DSL</span></a></li><li><a href=/validation-reference><span>Data Validation</span></a></li><li><a href=/api-documentation><span>API Documentation</span></a></li><li class=active><a href=/plugins-reference><span>Plugins Reference</span></a><ul class=sub-nav><li class=active><a href=/plugins-reference/plugins-creation-prerequisites><span>Plugins creation prerequisites</span></a></li><li><a href=/plugins-reference/plugins-features><span>Plugins features</span></a></li><li><a href=/plugins-reference/managing-plugins><span>Managing Plugins</span></a></li><li><a href=/plugins-reference/plugins-context><span>The plugin context</span></a></li><li><a href=/plugins-reference/protocols><span>Protocols</span></a></li></ul></li><li><a href=/kuzzle-events><span>Kuzzle events</span></a></li><li><a href=/elasticsearch-cookbook><span>Elasticsearch Cookbook</span></a></li></ul></li><li><a href=http://kuzzle.io/demos-tutorials/ class=nav-item>Demos</a></li><li><a href=http://kuzzle.io/blog/ class=nav-item>Blog</a></li><li><a href=http://kuzzle.io/contact/ class=nav-item>Contact</a></li><li><a href=http://kuzzle.io/install-kuzzle/ class=nav-item>Try it</a></li><li><a href=https://github.com/kuzzleio/kuzzle target=_blank class="nav-item github"><i class="icon icon-github icon-small"></i></a></li></ul></nav></div><div class="developer-nav open"><ul class=search><li><input name=search type=search placeholder=search tabindex=1></li></ul><ul class=nav><li><a href=/guide><span>Guide</span></a></li><li><a href=/sdk-reference><span>SDK Reference</span></a></li><li><a href=/kuzzle-dsl><span>Kuzzle DSL</span></a></li><li><a href=/validation-reference><span>Data Validation</span></a></li><li><a href=/api-documentation><span>API Documentation</span></a></li><li class=active><a href=/plugins-reference><span>Plugins Reference</span></a></li><li><a href=/kuzzle-events><span>Kuzzle events</span></a></li><li><a href=/elasticsearch-cookbook><span>Elasticsearch Cookbook</span></a></li></ul><div class=search-results><ul></ul></div><script type=text/plain id=search-results-template><li>
        <a href="__link__" tabindex="__tabindex__">
          <p class="page">
            <span class="title">__title__</span>
            <span class="firstMember">__firstMember__</span>
            <span class="parent">__parent__</span>
          </p>
          <p class="preview">__preview__</p>
        </a>
      </li></script></div></header><div class=container><div class=tocify-wrapper><ul class=search-results></ul><div class=tocify><ul class=tocify-header><li class="tocify-item tocify-focus tocify-hover"></li></ul><ul class=tocify-header><li class=tocify-item><a style="color: #111; text-decoration: none" href=http://docs.kuzzle.io/plugins-reference title="back to Plugins Reference home">Plugins Reference</a></li><ul class=tocify-subheader><li class="tocify-item tocify-focus"><a style="color: #FFF; text-decoration: none" href=# title="requirements to develop your plugin">Plugins creation prerequisites</a></li><ul class=tocify-header><ul class=tocify-subheader></ul></ul><li class=tocify-item><a style="color: #002835; text-decoration: none" href=/plugins-reference/plugins-features title="understand Kuzzle plugins mechanisms">Plugins features</a></li><li class=tocify-item><a style="color: #002835; text-decoration: none" href=/plugins-reference/managing-plugins title="learn how to enable and configure plugins">Managing Plugins</a></li><li class=tocify-item><a style="color: #002835; text-decoration: none" href=/plugins-reference/plugins-context title="plugin initialization context attribute reference">The plugin context</a></li><li class=tocify-item><a style="color: #002835; text-decoration: none" href=/plugins-reference/protocols title="Extend Kuzzle communication capabilities">Protocols</a></li></ul></ul><ul class=toc-footer></ul></div></div><div class=page-wrapper><div class=toc><ul><li class="toc-item toc-level-1"><a href=#plugins-creation-prerequisites title="Plugins creation prerequisites">Plugins creation prerequisites</a></li><li class="toc-item toc-level-2"><a href=#writing-plugin-code title="Writing plugin code">Writing plugin code</a></li><li class="toc-item toc-level-2"><a href=#custom-plugin-configuration title="Custom Plugin configuration">Custom Plugin configuration</a></li><li class="toc-item toc-level-2"><a href=#plugin-init-function title="Plugin init function">Plugin init function</a></li></ul></div><div class=content><div class=mobile-breadcrumb><p style=float:left><a href=http://docs.kuzzle.io/ >Kuzzle documentation</a> &#xBB; <a href=http://docs.kuzzle.io/plugins-reference>Plugins Reference</a> &#xBB; Plugins creation prerequisites</p><p style=float:right class=version-selector><select onchange="window.location = this.value"><option selected>1.x</option></select></p></div><div class=nav-sibling><div class=nav-left><p><a href=https://github.com/kuzzleio/documentation/edit/master/src/plugins-reference/plugins-creation-prerequisites/index.md>edit on github<i class="icon icon-github icon-small"></i></a> <span class=separator>|</span> <a href="https://github.com/kuzzleio/documentation/issues/new?labels=plugins-reference&amp;title=Feedback%20about%20page%20&apos;plugins-reference/plugins-creation-prerequisites/index.md&apos;">send feedback about this content<i class="icon icon-github icon-small"></i></a> <span class=separator>|</span><select class=rate-documentation><option value=""></option><option value=1>Unusable documentation</option><option value=2>Poor documentation</option><option value=3>OK documentation</option><option value=4>Good documentation</option><option value=5>Excellent documentation</option></select></p></div><div class=nav-right><p class=version-selector><span>current version:</span><select onchange="window.location = this.value"><option selected>1.x</option></select></p></div><div style=clear:both></div></div><div class=toc-inline><ul><li class="toc-item toc-level-1"><a href=#plugins-creation-prerequisites title="Plugins creation prerequisites">Plugins creation prerequisites</a></li><li class="toc-item toc-level-2"><a href=#writing-plugin-code title="Writing plugin code">Writing plugin code</a></li><li class="toc-item toc-level-2"><a href=#custom-plugin-configuration title="Custom Plugin configuration">Custom Plugin configuration</a></li><li class="toc-item toc-level-2"><a href=#plugin-init-function title="Plugin init function">Plugin init function</a></li></ul></div><div class=main-content><div class=reading-time><p>Reading time: 5 min</p></div><h1><a class=anchor id=plugins-creation-prerequisites></a>Plugins creation prerequisites</h1><hr><h2><a class=anchor id=writing-plugin-code></a>Writing plugin code</h2><p>Plugins must be valid NodeJS require-able <a href=https://nodejs.org/dist/latest-v6.x/docs/api/modules.html>modules</a>, usually shipped as a directory containing either:</p><ul><li>an <code>index.js</code> file in its root directory, exporting a valid Javascript class exposing an <code>init</code> method, or</li><li>a well-formed <code>package.json</code> file in its root directory, specifying the path of the main require-able in the <code>main</code> field.</li></ul><p>To determine the Plugin name, Kuzzle looks for the <code>name</code> field in the <code>package.json</code> file falling back to the plugin directory name otherwise.</p><hr><h2><a class=anchor id=custom-plugin-configuration></a>Custom Plugin configuration</h2><p>When initializing a Plugin, Kuzzle calls its <code>init(customConfig, context)</code> method, passing the <a href=/plugins-reference/plugins-context>context</a> and the plugin&apos;s custom configuration.</p><p>Custom configuration parameters are specified for each plugin in the <code>plugins</code> object of the <a href=/guide/essentials/configuration>Kuzzle configuration file</a>.</p><pre><code class="hljs json">{
  <span class=hljs-attr>&quot;plugins&quot;</span>: {
    <span class=hljs-attr>&quot;kuzzle-plugin-foobar&quot;</span>: {
      <span class=hljs-attr>&quot;option_1&quot;</span>: <span class=hljs-string>&quot;option_value&quot;</span>,
      <span class=hljs-attr>&quot;option_2&quot;</span>: <span class=hljs-string>&quot;option_value&quot;</span>
    }
  }
}</code></pre><p>Each Plugin is responsible of handling the custom configuration parameters and Kuzzle has no opinion on how to do it. Whether the custom configuration is merged with the defaults or not entirely depends on the implementation of the <code>init</code> function.</p><p>Within a plugin&apos;s custom configuration, there are a few reserved words used by Kuzzle to configure how a plugin is loaded:</p><pre><code class="hljs json">{
  <span class=hljs-attr>&quot;plugins&quot;</span>: {
    <span class=hljs-attr>&quot;kuzzle-plugin-foobar&quot;</span>: {
      <span class=hljs-attr>&quot;killTimeout&quot;</span>: <span class=hljs-number>6000</span>,
      <span class=hljs-attr>&quot;maxMemoryRestart&quot;</span>: <span class=hljs-string>&quot;200M&quot;</span>,
      <span class=hljs-attr>&quot;threads&quot;</span>: <span class=hljs-number>0</span>
    }
  }
}</code></pre><p>Where:</p><table><thead><tr><th>Keyword</th><th>Type</th><th>Default Value</th><th>Description</th></tr></thead><tbody><tr><td><code>killTimeout</code></td><td><code>unsigned integer</code></td><td><code>6000</code></td><td>(if <code>threads</code> &gt; 0) Time (in milliseconds) to wait for a plugin to shut down before killing it</td></tr><tr><td><code>maxMemoryRestart</code></td><td><code>string</code></td><td><code>1G</code></td><td>(if <code>threads</code> &gt; 0) Maximum memory usage of a worker plugin. If exceeded, the plugin is restarted.<br>Examples: <code>10K</code> (10KB), <code>200M</code> (200MB), <code>3G</code> (3GB)</td></tr><tr><td><code>threads</code></td><td><code>unsigned integer</code></td><td><code>0</code></td><td>If &gt; 0, the plugin will be treated as a worker plugin (see below)</td></tr></tbody></table><hr><h2><a class=anchor id=plugin-init-function></a>Plugin init function</h2><p>Plugins must expose a <code>init</code> function.</p><p>Kuzzle calls the <code>init</code> function at startup, during initialization, and ignores any plugin without this function exposed.</p><p>Expected arguments: <code>function (config, context)</code></p><p>Where:</p><ul><li><code>config</code> (JSON Object): JSON object containing the custom plugin configuration</li><li><code>context</code> (JSON Object): the <a href=/plugins-reference/plugins-context>plugin context</a></li></ul><div style="clear: both"></div></div><hr><div id=disqus_thread></div><script async data-packer=exclude>var disqus_developer = 1;
      
        var disqus_config = function () {
          this.page.url = 'http://docs.kuzzle.io/plugins-reference/plugins-creation-prerequisites';
          this.page.title = 'Plugins creation prerequisites';
          this.page.identifier = 'plugins-reference/plugins-creation-prerequisites';
        };
      
        (function() {
          var d = document, s = d.createElement('script');
          s.src = 'https://kuzzle-documentation.disqus.com/embed.js';
          s.async = 'async';
          s.setAttribute('data-timestamp', +new Date());
          (d.head || d.body).appendChild(s);
        })();</script><div class="nav-sibling bottom"><div class=nav-left><p><a href=https://github.com/kuzzleio/documentation/edit/master/src/plugins-reference/plugins-creation-prerequisites/index.md>edit on github<i class="icon icon-github icon-small"></i></a> <span class=separator>|</span> <a href="https://github.com/kuzzleio/documentation/issues/new?labels=plugins-reference&amp;title=Feedback%20about%20page%20&apos;plugins-reference/plugins-creation-prerequisites/index.md&apos;">send feedback about this content<i class="icon icon-github icon-small"></i></a> <span class=separator>|</span><select class=rate-documentation><option value=""></option><option value=1>Unusable documentation</option><option value=2>Poor documentation</option><option value=3>OK documentation</option><option value=4>Good documentation</option><option value=5>Excellent documentation</option></select></p></div><div class=nav-right><p class=medium-only><a href=http://docs.kuzzle.io/plugins-reference/plugins-features>Plugins features &#xBB;</a></p><p><a href=#>back to top &#x2191;</a></p></div><div style=clear:both></div></div></div></div></div><script type=text/javascript data-packer=exclude>var path = 'plugins-reference/plugins-creation-prerequisites';
  var site_url = 'http://docs.kuzzle.io'
  var site_base_path = '/'
  var ancestry_parent_path = 'plugins-reference'
  var report404ga = ''
  var algolia_projectId = '4RFBRWISJR'
  var algolia_publicKey = '6febf1ebe906bd82bce58d5a20ac6c1b'</script><script src=/assets/javascript/e6791aa54bf763f10700a88b38d578282663be53.min.js></script></body></html>