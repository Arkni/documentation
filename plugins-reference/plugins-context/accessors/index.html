<!doctype html><html><head><meta http-equiv=Content-Type content="text/html; charset=utf-8"><meta http-equiv=X-UA-Compatible content="IE=edge,chrome=1"><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1"><meta name=msapplication-TileColor content=#FFFFFF><meta name=msapplication-TileImage content=http://docs.kuzzle.io/assets/images/favicon/mstile-144x144.png><meta name=msapplication-square70x70logo content=http://docs.kuzzle.io/assets/images/favicon/mstile-70x70.png><meta name=msapplication-square150x150logo content=http://docs.kuzzle.io/assets/images/favicon/mstile-150x150.png><meta name=msapplication-wide310x150logo content=http://docs.kuzzle.io/assets/images/favicon/mstile-310x150.png><meta name=msapplication-square310x310logo content=http://docs.kuzzle.io/assets/images/favicon/mstile-310x310.png><meta name=google-site-verification content=luspUdq52gkUU0FFChQ2xmeXSs5HDafpARQ7fVXVBp4><meta itemprop=name content=accessors><meta itemprop=image content=http://docs.kuzzle.io/assets/images/favicon/favicon-196x196.png><meta name=twitter:card value=summary><meta name=twitter:site content=@kuzzleio><meta name=twitter:title content=accessors><meta name=twitter:creator content=@kuzzleio><meta name=twitter:image content=http://docs.kuzzle.io/assets/images/favicon/favicon-196x196.png><meta property=og:title content=accessors><meta property=og:type content=article><meta property=og:site_name content=""><meta property=og:image content=http://docs.kuzzle.io/assets/images/favicon/favicon-96x96.png><meta property=article:published_time content=2017-08-30T15:07:32.787Z><meta property=article:modified_time content=2017-08-30T15:07:32.787Z><meta property=article:section content="Plugins Reference"><meta property=article:tag content="The plugin context"><link rel=apple-touch-icon-precomposed sizes=57x57 href=/assets/images/favicon/apple-touch-icon-57x57.png><link rel=apple-touch-icon-precomposed sizes=114x114 href=/assets/images/favicon/apple-touch-icon-114x114.png><link rel=apple-touch-icon-precomposed sizes=72x72 href=/assets/images/favicon/apple-touch-icon-72x72.png><link rel=apple-touch-icon-precomposed sizes=144x144 href=/assets/images/favicon/apple-touch-icon-144x144.png><link rel=apple-touch-icon-precomposed sizes=60x60 href=/assets/images/favicon/apple-touch-icon-60x60.png><link rel=apple-touch-icon-precomposed sizes=120x120 href=/assets/images/favicon/apple-touch-icon-120x120.png><link rel=apple-touch-icon-precomposed sizes=76x76 href=/assets/images/favicon/apple-touch-icon-76x76.png><link rel=apple-touch-icon-precomposed sizes=152x152 href=/assets/images/favicon/apple-touch-icon-152x152.png><link rel=icon type=image/png href=/assets/images/favicon/favicon-196x196.png sizes=196x196><link rel=icon type=image/png href=/assets/images/favicon/favicon-96x96.png sizes=96x96><link rel=icon type=image/png href=/assets/images/favicon/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=/assets/images/favicon/favicon-16x16.png sizes=16x16><link rel=icon type=image/png href=/assets/images/favicon/favicon-128.png sizes=128x128><link rel=stylesheet href=/assets/font-awesome/scss/font-awesome.css><link href="//fonts.googleapis.com/css?family=Ubuntu:400,500,700" rel=stylesheet><title>accessors - The plugin context - Plugins Reference - Kuzzle documentation</title><link rel=stylesheet href=//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.7.0/styles/atom-one-light.min.css><link href=/assets/stylesheets/full/screen.css rel=stylesheet type=text/css media=screen></head><body class=index><header><div class=wrapper><div id=logo><a href=http://kuzzle.io/ >&#xA0;</a></div><a class=mobile-nav-burger href=javascript:;></a><nav><ul><li><a href=http://kuzzle.io/kuzzle-enterprise/ class=nav-item>product</a></li><li><a href=http://docs.kuzzle.io/ class="nav-item developers active">Documentation</a><ul class=mobile-nav><li><a href=/guide><span>Guide</span></a></li><li><a href=/sdk-reference><span>SDK Reference</span></a></li><li><a href=/kuzzle-dsl><span>Kuzzle DSL</span></a></li><li><a href=/validation-reference><span>Data Validation</span></a></li><li><a href=/api-documentation><span>API Documentation</span></a></li><li class=active><a href=/plugins-reference><span>Plugins Reference</span></a><ul class=sub-nav><li><a href=/plugins-reference/plugins-creation-prerequisites><span>Plugins creation prerequisites</span></a></li><li><a href=/plugins-reference/plugins-features><span>Plugins features</span></a></li><li><a href=/plugins-reference/managing-plugins><span>Managing Plugins</span></a></li><li class=active><a href=/plugins-reference/plugins-context><span>The plugin context</span></a></li><li><a href=/plugins-reference/protocols><span>Protocols</span></a></li></ul></li><li><a href=/kuzzle-events><span>Kuzzle events</span></a></li><li><a href=/elasticsearch-cookbook><span>Elasticsearch Cookbook</span></a></li></ul></li><li><a href=http://kuzzle.io/demos-tutorials/ class=nav-item>Demos</a></li><li><a href=http://kuzzle.io/blog/ class=nav-item>Blog</a></li><li><a href=http://kuzzle.io/contact/ class=nav-item>Contact</a></li><li><a href=http://kuzzle.io/install-kuzzle/ class=nav-item>Try it</a></li><li><a href=https://github.com/kuzzleio/kuzzle target=_blank class="nav-item github"><i class="icon icon-github icon-small"></i></a></li></ul></nav></div><div class="developer-nav open"><ul class=search><li><input name=search type=search placeholder=search tabindex=1></li></ul><ul class=nav><li><a href=/guide><span>Guide</span></a></li><li><a href=/sdk-reference><span>SDK Reference</span></a></li><li><a href=/kuzzle-dsl><span>Kuzzle DSL</span></a></li><li><a href=/validation-reference><span>Data Validation</span></a></li><li><a href=/api-documentation><span>API Documentation</span></a></li><li class=active><a href=/plugins-reference><span>Plugins Reference</span></a></li><li><a href=/kuzzle-events><span>Kuzzle events</span></a></li><li><a href=/elasticsearch-cookbook><span>Elasticsearch Cookbook</span></a></li></ul><div class=search-results><ul></ul></div><script type=text/plain id=search-results-template><li>
        <a href="__link__" tabindex="__tabindex__">
          <p class="page">
            <span class="title">__title__</span>
            <span class="firstMember">__firstMember__</span>
            <span class="parent">__parent__</span>
          </p>
          <p class="preview">__preview__</p>
        </a>
      </li></script></div></header><div class=container><div class=tocify-wrapper><ul class=search-results></ul><div class=tocify><ul class=tocify-header><li class="tocify-item tocify-focus tocify-hover"></li></ul><ul class=tocify-header><li class=tocify-item><a style="color: #111; text-decoration: none" href=http://docs.kuzzle.io/plugins-reference title="back to Plugins Reference home">Plugins Reference</a></li><ul class=tocify-subheader><li class=tocify-item><a style="color: #002835; text-decoration: none" href=/plugins-reference/plugins-creation-prerequisites title="requirements to develop your plugin">Plugins creation prerequisites</a></li><li class=tocify-item><a style="color: #002835; text-decoration: none" href=/plugins-reference/plugins-features title="understand Kuzzle plugins mechanisms">Plugins features</a></li><li class=tocify-item><a style="color: #002835; text-decoration: none" href=/plugins-reference/managing-plugins title="learn how to enable and configure plugins">Managing Plugins</a></li><li class="tocify-item tocify-focus"><a style="color: #FFF; text-decoration: none" href=# title="plugin initialization context attribute reference">The plugin context</a></li><ul class=tocify-header><ul class=tocify-subheader><li class="tocify-item tocify-level-2"><a style="color: #002835; text-decoration: none" href=/plugins-reference/plugins-context title="plugin initialization context attribute reference">&#x203A; Introductions</a></li><li class="tocify-item tocify-level-2 tocify-focus"><a style="color: #FFF; text-decoration: none" href=/plugins-reference/plugins-context/accessors title=accessors>&#x203A; accessors</a></li><li class="tocify-item tocify-level-2"><a style="color: #002835; text-decoration: none" href=/plugins-reference/plugins-context/constructors title=constructors>&#x203A; constructors</a></li><li class="tocify-item tocify-level-2"><a style="color: #002835; text-decoration: none" href=/plugins-reference/plugins-context/errors title=errors>&#x203A; errors</a></li><li class="tocify-item tocify-level-2"><a style="color: #002835; text-decoration: none" href=/plugins-reference/plugins-context/log title=log>&#x203A; log</a></li></ul></ul><li class=tocify-item><a style="color: #002835; text-decoration: none" href=/plugins-reference/protocols title="Extend Kuzzle communication capabilities">Protocols</a></li></ul></ul><ul class=toc-footer></ul></div></div><div class=page-wrapper><div class=toc><ul><li class="toc-item toc-level-1"><a href=#accessors title=accessors>accessors</a></li><li class="toc-item toc-level-2"><a href=#execute title=execute>execute</a></li><li class="toc-item toc-level-4"><a href=#with-promises title="With promises">With promises</a></li><li class="toc-item toc-level-4"><a href=#with-callbacks title="With callbacks">With callbacks</a></li><li class="toc-item toc-level-4"><a href=#overload-protection title="Overload protection">Overload protection</a></li><li class="toc-item toc-level-4"><a href=#example title=Example>Example</a></li><li class="toc-item toc-level-2"><a href=#storage title=storage>storage</a></li><li class="toc-item toc-level-3"><a href=#bootstrap title=bootstrap>bootstrap</a></li><li class="toc-item toc-level-3"><a href=#createcollection title=createCollection>createCollection</a></li><li class="toc-item toc-level-2"><a href=#strategies title=strategies>strategies</a></li><li class="toc-item toc-level-3"><a href=#add title=add>add</a></li><li class="toc-item toc-level-3"><a href=#remove title=remove>remove</a></li><li class="toc-item toc-level-2"><a href=#trigger title=trigger>trigger</a></li><li class="toc-item toc-level-2"><a href=#validation title=validation>validation</a></li><li class="toc-item toc-level-3"><a href=#addtype title=addType>addType</a></li><li class="toc-item toc-level-3"><a href=#validate title=validate>validate</a></li></ul></div><div class=content><div class=mobile-breadcrumb><p style=float:left><a href=http://docs.kuzzle.io/ >Kuzzle documentation</a> &#xBB; <a href=http://docs.kuzzle.io/plugins-reference>Plugins Reference</a> &#xBB; <a href=http://docs.kuzzle.io/plugins-reference/plugins-context>The plugin context</a> &#xBB; accessors</p><p style=float:right class=version-selector><select onchange="window.location = this.value"><option selected>1.x</option></select></p></div><div class=nav-sibling><div class=nav-left><p><a href=https://github.com/kuzzleio/documentation/edit/master/src/plugins-reference/plugins-context/accessors.md>edit on github<i class="icon icon-github icon-small"></i></a> <span class=separator>|</span> <a href="https://github.com/kuzzleio/documentation/issues/new?labels=plugins-reference&amp;title=Feedback%20about%20page%20&apos;plugins-reference/plugins-context/accessors.md&apos;">send feedback about this content<i class="icon icon-github icon-small"></i></a> <span class=separator>|</span><select class=rate-documentation><option value=""></option><option value=1>Unusable documentation</option><option value=2>Poor documentation</option><option value=3>OK documentation</option><option value=4>Good documentation</option><option value=5>Excellent documentation</option></select></p></div><div class=nav-right><p class=version-selector><span>current version:</span><select onchange="window.location = this.value"><option selected>1.x</option></select></p></div><div style=clear:both></div></div><div class=toc-inline><ul><li class="toc-item toc-level-1"><a href=#accessors title=accessors>accessors</a></li><li class="toc-item toc-level-2"><a href=#execute title=execute>execute</a></li><li class="toc-item toc-level-4"><a href=#with-promises title="With promises">With promises</a></li><li class="toc-item toc-level-4"><a href=#with-callbacks title="With callbacks">With callbacks</a></li><li class="toc-item toc-level-4"><a href=#overload-protection title="Overload protection">Overload protection</a></li><li class="toc-item toc-level-4"><a href=#example title=Example>Example</a></li><li class="toc-item toc-level-2"><a href=#storage title=storage>storage</a></li><li class="toc-item toc-level-3"><a href=#bootstrap title=bootstrap>bootstrap</a></li><li class="toc-item toc-level-3"><a href=#createcollection title=createCollection>createCollection</a></li><li class="toc-item toc-level-2"><a href=#strategies title=strategies>strategies</a></li><li class="toc-item toc-level-3"><a href=#add title=add>add</a></li><li class="toc-item toc-level-3"><a href=#remove title=remove>remove</a></li><li class="toc-item toc-level-2"><a href=#trigger title=trigger>trigger</a></li><li class="toc-item toc-level-2"><a href=#validation title=validation>validation</a></li><li class="toc-item toc-level-3"><a href=#addtype title=addType>addType</a></li><li class="toc-item toc-level-3"><a href=#validate title=validate>validate</a></li></ul></div><div class=main-content><div class=reading-time><p>Reading time: 17 min</p></div><h1><a class=anchor id=accessors></a>accessors</h1><h2><a class=anchor id=execute></a><code>execute</code></h2><p class=since>Since Kuzzle v1.0.0</p><p>Sends a request to <a href=/api-documentation>Kuzzle API</a>.</p><h4><a class=anchor id=with-promises></a>With promises</h4><p><strong><code>execute(request, [overloadProtection])</code></strong></p><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td><code>request</code></td><td><code>Request</code></td><td>A <a href=/plugins-reference/plugins-context/constructors/#request><code>Request</code></a> to execute</td></tr><tr><td><code>overloadProtection</code></td><td><code>Boolean</code></td><td>Optional. Default: <code>true</code>. See <a href=/plugins-reference/plugins-context/accessors/#overload-protection>Overload Protection</a></td></tr></tbody></table><p>Returns a Promise, either resolved with the source <code>Request</code> object with its response part filled (see <a href=/plugins-reference/plugins-context/constructors/#attributes>Request attributes</a>), or rejected with a <a href=/plugins-reference/plugins-context/errors/ >KuzzleError object</a>.</p><h4><a class=anchor id=with-callbacks></a>With callbacks</h4><p><strong><code>execute(request, [overloadProtection], callback)</code></strong></p><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td><code>request</code></td><td><code>Request</code></td><td>A <a href=/plugins-reference/plugins-context/constructors/#request><code>Request</code></a> to execute</td></tr><tr><td><code>overloadProtection</code></td><td><code>Boolean</code></td><td>Optional. Default: <code>true</code>. See <a href=/plugins-reference/plugins-context/accessors/#overload-protection>Overload Protection</a></td></tr><tr><td><code>callback(error, request)</code></td><td><code>Function</code></td><td>Function executed with the request&apos;s result</td></tr></tbody></table><p>Upon completion, the <code>request</code> argument provided to the callback function will be the source request with its response part filled (see <a href=/plugins-reference/plugins-context/constructors/#attributes>Request attributes</a>).</p><h4><a class=anchor id=overload-protection></a>Overload protection</h4><p>Kuzzle server nodes feature a configurable overload-protection mechanism. When asking Kuzzle to execute an API request, there are three possible outcomes:</p><ul><li>Kuzzle has room for that request: it is executed immediately</li><li>A lot of other requests are already running: it is delayed until time can be allocated to it</li><li>Kuzzle is overloaded: requests are rejected until room can be found again in the requests buffer</li></ul><p>Most of the time, plugins should go through that system when submitting requests. But some rare use cases require that requests must be executed within a predictible and constant delay, making this system impractical.<br>For those cases, plugins can disable the overload protection mechanism for specific requests.</p><p>Be warned though that it is advised to only disable this protection if necessary, and only for a small set of requests.<br>If plugins have to handle rejected requests because Kuzzle gets overloaded, then disabling this protection to prevent such errors will only hide the problem instead of solving it. Instead, administrators are encouraged to either adjust the size of the request buffer in <a href=/guide/essentials/configuration/ >Kuzzle&apos;s configuration</a>, or to add more Kuzzle nodes to their infrastructure.</p><h4><a class=anchor id=example></a>Example</h4><pre><code class="hljs js"><span class=hljs-keyword>let</span>
  derivedRequest = <span class=hljs-keyword>new</span> context.constructors.Request(request, {
    <span class=hljs-attr>index</span>: <span class=hljs-string>&apos;index&apos;</span>,
    <span class=hljs-attr>collection</span>: <span class=hljs-string>&apos;collection&apos;</span>,
    <span class=hljs-attr>controller</span>: <span class=hljs-string>&apos;read&apos;</span>,
    <span class=hljs-attr>action</span>: <span class=hljs-string>&apos;get&apos;</span>,
    <span class=hljs-attr>_id</span>: <span class=hljs-string>&apos;documentID&apos;</span>
  });

context.accessors.execute(request, (error, request) =&gt; {
  <span class=hljs-comment>/*
   Kuzzle&apos;s response can be obtained with request.response

   See Request constructor documentation for more information
   */</span>
});</code></pre><hr><h2><a class=anchor id=storage></a><code>storage</code></h2><p>This accessor allows plugins to manage their private and secure permanent storage.<br>Data stored in this space cannot be accessed from Kuzzle, its API, or from another plugin.</p><p>The only way a document stored in this space can be accessed is if the owner plugin explicitly allows it, by extending Kuzzle&apos;s API with a route exposing that data.</p><p>This storage space is a whole <a href=/guide/essentials/persisted/#working-with-persistent-data>data index</a>.</p><p>Data stored in this space can be accessed by using the <a href=/plugins-reference/plugins-context/constructors/#repository>Repository constructor</a></p><h3><a class=anchor id=bootstrap></a><code>bootstrap</code></h3><p class=since>Since Kuzzle v1.0.0</p><p>Allows to initialize the plugin storage index. When called, it will create the Elastisearch index and the <code>collections</code> provided in argument.</p><p>Can be called multiple times as long as the mappings are not modified through calls.</p><p><strong>Arguments</strong></p><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td><code>collections</code></td><td><code>Object</code></td><td>An object that contains the collection mappings. See the <a href=/guide/essentials/persisted/#document-mapping>guide</a> for more explanation about Elasticsearch mapping.</td></tr></tbody></table><p><strong>Returns</strong></p><p>Returns a <code>promise</code> that resolves to a <code>boolean</code> that indicates if the index and the collections already existed or not.</p><p><strong>Usage</strong></p><pre><code class="hljs js">context.accessors.storage.bootstrap({
  <span class=hljs-attr>someCollection</span>: {
    <span class=hljs-attr>properties</span>: {
      <span class=hljs-attr>someField</span>: {
        <span class=hljs-attr>type</span>: <span class=hljs-string>&apos;keyword&apos;</span>
      }
      ,
      ...
    }
  },
  <span class=hljs-attr>anotherCollection</span>: {
    <span class=hljs-attr>properties</span>: {
      ...
    }
  }
});</code></pre><h3><a class=anchor id=createcollection></a><code>createCollection</code></h3><p class=since>Since Kuzzle v1.0.0</p><p>Allows to create a collection with its mapping. Can be called multiple times as long as the mapping is not modified. Consider using <a href=/plugins-reference/plugins-context/accessors/#storage-bootstrap><code>storage.bootstrap</code></a> if your collections are not dynamic.</p><p><strong>Arguments</strong></p><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td><code>collection</code></td><td><code>string</code></td><td>The collection name</td></tr><tr><td><code>collectionMapping</code></td><td><code>object</code></td><td>The collection mapping</td></tr></tbody></table><p><strong>Returns</strong></p><p>Returns a <code>promise</code> that resolves to the object <code>{ acknowledged: true }</code>.</p><p><strong>Usage</strong></p><pre><code class="hljs js">context.accessors.storage.createCollection(<span class=hljs-string>&apos;someCollection&apos;</span>, {
    <span class=hljs-attr>properties</span>: {
      <span class=hljs-attr>someField</span>: {
        <span class=hljs-attr>type</span>: <span class=hljs-string>&apos;keyword&apos;</span>
      }
      ,
      ...
    }
});</code></pre><hr><h2><a class=anchor id=strategies></a><code>strategies</code></h2><p>This accessor allows to dynamically add or remove <a href=/guide/essentials/user-authentication/#authentication-strategy>authentication strategies</a></p><p>In a cluster context, Kuzzle will add/remove strategies on all nodes.</p><aside class=warning>Plugins should also make sure that, when changing the list of available strategies dynamically, that list will remain the same after a Kuzzle node restarts.</aside><h3><a class=anchor id=add></a><code>add</code></h3><p class=since>Since Kuzzle v1.2.0</p><p>Adds a new authentication strategy. Users can be authenticated using that new strategy as soon as this method resolves.</p><p><strong>Arguments</strong></p><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td><code>name</code></td><td><code>String</code></td><td>The name of the new authentication strategy</td></tr><tr><td><code>properties</code></td><td><code>Object</code></td><td>Strategy properties. The description format is the same than the one used when <a href=/plugins-reference/plugins-features/adding-authentication-strategy/#expose-authentication-strategies>exposing a <code>strategies</code> object during an auth plugin initialization</a></td></tr></tbody></table><p><strong>Returns</strong></p><p>This method returns a promise, that resolves to nothing when the authentication strategy has been successfully added.</p><p>The promise will be rejected when:</p><ul><li>the properties for that strategy are invalid or incomplete</li><li>a strategy of the same name already exists</li></ul><p><strong>Usage</strong></p><pre><code class="hljs js">context.accessors.strategies.add(<span class=hljs-string>&apos;someStrategy&apos;</span>, {
  <span class=hljs-attr>config</span>: {
    <span class=hljs-attr>constructor</span>: StrategyConstructor,
    <span class=hljs-attr>strategyOptions</span>: {},
    <span class=hljs-attr>authenticateOptions</span>: {
      <span class=hljs-attr>scope</span>: []
    },
    <span class=hljs-attr>fields</span>: [<span class=hljs-string>&apos;field1&apos;</span>, <span class=hljs-string>&apos;field2&apos;</span>, <span class=hljs-string>&apos;...&apos;</span>, <span class=hljs-string>&apos;fieldn&apos;</span>]
  },
  <span class=hljs-attr>methods</span>: {
    <span class=hljs-attr>afterRegister</span>: <span class=hljs-string>&apos;afterRegister&apos;</span>,
    <span class=hljs-attr>create</span>: <span class=hljs-string>&apos;create&apos;</span>,
    <span class=hljs-attr>delete</span>: <span class=hljs-string>&apos;delete&apos;</span>,
    <span class=hljs-attr>exists</span>: <span class=hljs-string>&apos;exists&apos;</span>,
    <span class=hljs-attr>getById</span>: <span class=hljs-string>&apos;getById&apos;</span>,
    <span class=hljs-attr>getInfo</span>: <span class=hljs-string>&apos;getInfo&apos;</span>,
    <span class=hljs-attr>update</span>: <span class=hljs-string>&apos;update&apos;</span>,
    <span class=hljs-attr>validate</span>: <span class=hljs-string>&apos;validate&apos;</span>,
    <span class=hljs-attr>verify</span>: <span class=hljs-string>&apos;verify&apos;</span>
  }
});</code></pre><h3><a class=anchor id=remove></a><code>remove</code></h3><p class=since>Since Kuzzle v1.2.0</p><p>Dynamically removes a strategy, preventing new authentications using it.</p><aside class=warning>Authentication tokens created using that strategy ARE NOT invalidated by using this method.</aside><p><strong>Arguments</strong></p><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td><code>name</code></td><td><code>String</code></td><td>The name of the authentication strategy to remove</td></tr></tbody></table><p><strong>Returns</strong></p><p>A promise, resolving to nothing if the strategy has been successfully removed.</p><p>This promise will be rejected when:</p><ul><li>the strategy to remove does not exist</li><li>the strategy to remove is owned by another plugin</li></ul><p><strong>Usage</strong></p><pre><code class="hljs js">context.accessors.strategies.remove(<span class=hljs-string>&apos;someStrategy&apos;</span>);</code></pre><hr><h2><a class=anchor id=trigger></a><code>trigger</code></h2><p class=since>Since Kuzzle v1.0.0</p><p>Triggers a custom event, listenable by <a href=//plugins-reference/plugins-features/adding-hooks/ ><code>hooks</code></a>. This allows other plugins to react to events generated by the current plugin.</p><p><strong>Arguments</strong></p><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td><code>eventName</code></td><td><code>String</code></td><td>The custom event name</td></tr><tr><td><code>payload</code></td><td><code>Object</code></td><td>An optional payload to attach to the triggered event</td></tr></tbody></table><p><strong>Note</strong></p><p>The name of the resulting event being triggered will be generated as <code>&quot;plugin-&quot; + pluginName + &quot;:&quot; + eventName</code> in order to avoid collisions with Kuzzle native events.</p><p><strong>Usage</strong></p><pre><code class="hljs js"><span class=hljs-comment>// Emitting plugin, called &quot;some-plugin&quot;</span>
context.accessors.trigger(<span class=hljs-string>&apos;someEvent&apos;</span>, {
  <span class=hljs-attr>someAttribute</span>: <span class=hljs-string>&apos;someValue&apos;</span>
});

<span class=hljs-comment>// Listening plugin</span>
<span class=hljs-class><span class=hljs-keyword>class</span> <span class=hljs-title>ListeningPlugin</span> </span>{
  <span class=hljs-keyword>constructor</span> () {
    <span class=hljs-keyword>this</span>.hooks = {
      <span class=hljs-comment>// Notice the generated event name</span>
      <span class=hljs-string>&apos;plugin-some-plugin:someEvent&apos;</span>: <span class=hljs-string>&apos;someEventListener&apos;</span>
    };
  }

  someEventListener (payload) {
    <span class=hljs-keyword>this</span>.doSomething(payload);
  }
}</code></pre><hr><h2><a class=anchor id=validation></a><code>validation</code></h2><p>This accessor exposes basic functionalities of the <a href=/validation-reference/ >Data Validation API</a></p><h3><a class=anchor id=addtype></a><code>addType</code></h3><p class=since>Since Kuzzle v1.0.0</p><p>Adds a new data type, that can be used to validate if a document is well-formed.</p><p><strong>Arguments</strong></p><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td><code>validationType</code></td><td><code>object</code></td><td>An object instance of a validation type</td></tr></tbody></table><p><strong>Returns</strong></p><p>Nothing. Can throw a <code>PluginImplementationError</code> if the validation type has not the expected form.</p><p><strong>Usage</strong></p><pre><code class="hljs js"><span class=hljs-comment>/**
 * @typedef {{
 *   validate: Function,
 *   validateFieldSpecification: Function,
 *   typeName: string,
 *   allowChildren: boolean,
 *   checkAllowedProperties: Function,
 *   allowedTypeOptions: string[]
 * }} ValidationType
 */</span></code></pre><p>See constructor <code>BaseValidationType</code> for more details.</p><h3><a class=anchor id=validate></a><code>validate</code></h3><p class=since>Since Kuzzle v1.0.0</p><p>Validates a document wrapped in a <code>Request</code> object.</p><p><strong>Arguments</strong></p><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td><code>request</code></td><td><code>Request</code></td><td>A document wrapped as a <code>Request</code> object</td></tr><tr><td><code>verbose</code></td><td><code>boolean</code></td><td>Defines the behavior of the validation</td></tr></tbody></table><p><strong>Returns</strong></p><p>If <code>verbose</code> is set to <code>false</code>:</p><p>Returns a <code>promise</code> that resolves to a modified <code>Request</code> instance where <code>defaultValues</code> are applied. Rejects if validation fails.</p><p>If <code>verbose</code> is set to <code>true</code>:</p><p>Returns a <code>promise</code> that resolves to an <code>object</code>:</p><pre><code class="hljs js">{
  <span class=hljs-attr>errorMessages</span>: ...,
  <span class=hljs-attr>validation</span>: ...
}</code></pre><p>Where:</p><ul><li><code>errorMessages</code> is a structured javascript object reflecting the structure of the document with all errors collected during the validation process</li><li><code>validation</code> is a <code>boolean</code> reflecting the validation state.</li></ul><div style="clear: both"></div></div><hr><div id=disqus_thread></div><script async data-packer=exclude>var disqus_developer = 1;
      
        var disqus_config = function () {
          this.page.url = 'http://docs.kuzzle.io/plugins-reference/plugins-context/accessors';
          this.page.title = 'accessors';
          this.page.identifier = 'plugins-reference/plugins-context/accessors';
        };
      
        (function() {
          var d = document, s = d.createElement('script');
          s.src = 'https://kuzzle-documentation.disqus.com/embed.js';
          s.async = 'async';
          s.setAttribute('data-timestamp', +new Date());
          (d.head || d.body).appendChild(s);
        })();</script><div class="nav-sibling bottom"><div class=nav-left><p><a href=https://github.com/kuzzleio/documentation/edit/master/src/plugins-reference/plugins-context/accessors.md>edit on github<i class="icon icon-github icon-small"></i></a> <span class=separator>|</span> <a href="https://github.com/kuzzleio/documentation/issues/new?labels=plugins-reference&amp;title=Feedback%20about%20page%20&apos;plugins-reference/plugins-context/accessors.md&apos;">send feedback about this content<i class="icon icon-github icon-small"></i></a> <span class=separator>|</span><select class=rate-documentation><option value=""></option><option value=1>Unusable documentation</option><option value=2>Poor documentation</option><option value=3>OK documentation</option><option value=4>Good documentation</option><option value=5>Excellent documentation</option></select></p></div><div class=nav-right><p class=medium-only></p><p><a href=#>back to top &#x2191;</a></p></div><div style=clear:both></div></div></div></div></div><script type=text/javascript data-packer=exclude>var path = 'plugins-reference/plugins-context/accessors';
  var site_url = 'http://docs.kuzzle.io'
  var site_base_path = '/'
  var ancestry_parent_path = 'plugins-reference'
  var report404ga = ''
  var algolia_projectId = '4RFBRWISJR'
  var algolia_publicKey = '6febf1ebe906bd82bce58d5a20ac6c1b'</script><script src=/assets/javascript/e6791aa54bf763f10700a88b38d578282663be53.min.js></script></body></html>